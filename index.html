<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>卡牌</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #ddd7cb;
            text-align: center;
            padding: 20px;
        }
        #card {
            width: 90%;
            max-width: 380px;
            margin: 30px auto;
            border-radius: 16px;
            display: block;
        }
        button {
            width: 80%;
            max-width: 300px;
            height: 50px;
            background: #B36753;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            margin-top: 10px;
        }
        button:disabled {
            background: #999;
        }
        .tip {
            margin-top: 10px;
            color: #B36753;
            font-size: 14px;
        }
    </style>
</head>
<body>

<img id="card">
<button id="btn">抽卡</button>
<div class="tip" id="tip"></div>

<script>
// 基础配置
const total = 56;
const max = 3;

// 读取今天日期
let now = new Date().toISOString().split('T')[0];
let save = JSON.parse(localStorage.getItem('draw')) || { date: now, num: 0 };

// 如果是新的一天，重置次数
if (save.date !== now) {
    save = { date: now, num: 0 };
    localStorage.setItem('draw', JSON.stringify(save));
}

let img = document.getElementById('card');
let btn = document.getElementById('btn');
let tip = document.getElementById('tip');

// 显示随机卡牌
function show() {
    let r = Math.floor(Math.random() * total) + 1;
    let file = (r < 10 ? '0' : '') + r + '.jpg';
    img.src = file;
}

// 第一次打开就显示
show();

// 按钮状态
if (save.num >= max) {
    btn.disabled = true;
    tip.innerText = '今日已抽3次';
}

// 点击抽卡
btn.onclick = function () {
    if (save.num >= max) return;
    show();
    save.num++;
    localStorage.setItem('draw', JSON.stringify(save));
    if (save.num >= max) {
        btn.disabled = true;
        tip.innerText = '今日已抽3次';
    }
};
</script>
</body>
</html>
